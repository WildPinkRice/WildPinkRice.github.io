<!doctype html>
<html lang="cs">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>WinXP Retro Desktop — WildPinkRice</title>
<link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;600;700&family=Arial:wght@400;700&display=swap" rel="stylesheet">
<style>
  :root{
    --panel:#cce7ff;
    --titlebar:#0166c8;
    --taskbar:#0b54a0;
    --bg:#2f6fb2;
    --accent:#ffd84d;
    --glass: rgba(255,255,255,0.7);
  }
  html,body{height:100%;margin:0;font-family:"Segoe UI", "Arial", sans-serif;background:
    linear-gradient(180deg,#6aa7db 0%, #2f6fb2 100%);
    overflow:hidden;color:#000}
  /* wallpaper-style */
  .wallpaper{
    position:fixed;inset:0;background:
    radial-gradient(circle at 20% 20%, rgba(255,255,255,0.06), transparent 6%),
    radial-gradient(circle at 80% 80%, rgba(0,0,0,0.05), transparent 6%),
    linear-gradient(180deg,#6aa7db,#2f6fb2);
    display:flex;align-items:flex-start;justify-content:flex-start;padding:18px 24px;
    gap:18px;
  }

  /* desktop icons */
  .icons{display:flex;flex-direction:column;gap:14px;margin-top:30px}
  .icon{
    width:92px;padding:6px;border-radius:6px;cursor:default;text-align:center;
    user-select:none;
  }
  .icon img{width:48px;height:48px;display:block;margin:0 auto 6px;filter:drop-shadow(0 4px 8px rgba(0,0,0,0.25))}
  .icon .label{font-size:13px;color:#fff;text-shadow:0 1px 0 rgba(0,0,0,0.4)}
  .icon:hover{transform:translateX(6px);transition:transform .12s ease}

  /* taskbar bottom */
  .taskbar{
    position:fixed;left:8px;right:8px;bottom:8px;height:44px;background:linear-gradient(#eaf4ff,#d8ecff);
    border:2px solid #4887c9;border-radius:6px;display:flex;align-items:center;gap:10px;padding:6px 10px;box-shadow:0 8px 30px rgba(0,0,0,0.3);
    z-index:9999;
  }
  .start-btn{
    width:80px;height:32px;background:linear-gradient(#fff,#e6f7ff);border:1px solid #8db6df;border-radius:6px;display:flex;align-items:center;gap:8px;padding:6px 10px;cursor:pointer;
    box-shadow: inset 0 -2px 0 rgba(0,0,0,0.06);
  }
  .start-btn img{width:18px;height:18px}
  .task-middle{flex:1;display:flex;align-items:center;gap:6px}
  .clock{min-width:80px;text-align:center;color:#001a33;font-weight:700}

  /* start menu */
  .start-menu{
    position:fixed;left:12px;bottom:64px;width:320px;background:#fff;border:2px solid #6aa7db;border-radius:8px;padding:12px;box-shadow:0 30px 80px rgba(0,0,0,0.5);
    display:none;flex-direction:column;gap:8px;z-index:10000;
  }
  .start-row{display:flex;align-items:center;gap:10px}
  .start-row img{width:40px;height:40px}
  .start-link{padding:8px;border-radius:6px;cursor:pointer;color:#00324d}
  .start-link:hover{background:linear-gradient(#eef7ff,#e7f0fb)}

  /* windows */
  .window{
    position:fixed;width:520px;height:360px;border:2px solid #234f7a;border-radius:6px;background:linear-gradient(#fff,#f2f7ff);
    box-shadow:0 30px 80px rgba(0,0,0,0.45);overflow:hidden;display:flex;flex-direction:column;z-index:50;
  }
  .titlebar{
    background:linear-gradient(#0170cc,#005fa3);color:#fff;padding:8px 10px;display:flex;align-items:center;justify-content:space-between;
    font-weight:700;font-size:14px;
  }
  .title-actions{display:flex;gap:6px}
  .title-actions button{width:22px;height:18px;border-radius:3px;border:none;background:rgba(255,255,255,0.12);cursor:pointer;color:#fff;font-weight:700}
  .title-actions button:hover{filter:brightness(1.08)}
  .window .content{padding:14px;flex:1;overflow:auto;color:#001a33}

  /* small styles for "app" content */
  pre{background:#eef8ff;padding:8px;border-radius:6px;color:#012;overflow:auto;font-size:13px}
  a.button{display:inline-block;padding:8px 12px;border-radius:6px;background:#0166c8;color:#fff;text-decoration:none;font-weight:700}

  /* minimized icon */
  .task-item{padding:6px 10px;border-radius:6px;background:linear-gradient(#fff,#e6f7ff);border:1px solid #94c0e8;cursor:pointer;font-weight:600;color:#003b62}
  .task-item.minimized{opacity:0.7}

  /* small context menu */
  .context{
    position:fixed;background:#fff;border:2px solid #b8d9f6;border-radius:6px;padding:8px;display:none;z-index:20000;
    box-shadow: 0 18px 40px rgba(0,0,0,0.5);
  }
  .context button{display:block;background:transparent;border:none;padding:8px 10px;width:100%;text-align:left;cursor:pointer;border-radius:4px}
  .context button:hover{background:#eef7ff}

  /* small helper / egg modal */
  .modal{
    position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:30000;
    background:linear-gradient(180deg, rgba(1,10,20,0.6), rgba(3,8,15,0.6));
  }
  .modal .box{background:#fff;padding:22px;border-radius:8px;border:2px solid #88bfe6;color:#002a45;max-width:760px;box-shadow:0 40px 100px rgba(0,0,0,0.6)}
  .close{margin-left:12px;padding:6px 8px;border-radius:6px;border:none;background:#ffd84d;font-weight:700;cursor:pointer}

  /* disco + CRT classes */
  .disco{animation:disco 3s linear infinite}
  @keyframes disco{0%{filter:hue-rotate(0deg)}50%{filter:hue-rotate(120deg)}100%{filter:hue-rotate(0deg)}}

  .crt { position:relative; }
  .crt::after{content:'';position:absolute;inset:0;background:linear-gradient(180deg, transparent 0%, rgba(255,255,255,0.03) 20%, transparent 50%);mix-blend-mode:overlay;pointer-events:none }

  /* small responsive */
  @media (max-width:860px){
    .stage{padding:12px}
    .window{width:90%;height:60%}
    .start-menu{width:260px}
  }
</style>
</head>
<body>
<div class="wallpaper" id="desktop" tabindex="0">
  <div class="icons" id="icons">
    <div class="icon" data-app="cloner" title="ChatGPT Chat Cloner (double-click)">
      <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='64' height='64'><rect width='64' height='64' rx='10' fill='%230166c8'/><text x='50%' y='55%' font-size='32' text-anchor='middle' fill='white' font-family='Segoe UI'>C</text></svg>" alt="cloner">
      <div class="label">ChatGPT Cloner</div>
    </div>

    <div class="icon" data-app="readme" title="Readme (double-click)">
      <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='64' height='64'><rect width='64' height='64' rx='10' fill='%23ffd84d'/><text x='50%' y='55%' font-size='28' text-anchor='middle' fill='%23001' font-family='Segoe UI'>R</text></svg>" alt="readme">
      <div class="label">Readme</div>
    </div>
  </div>
</div>

<!-- Taskbar -->
<div class="taskbar" id="taskbar">
  <div class="start-btn" id="startBtn"><img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='18' height='18'><rect width='18' height='18' fill='%230166c8' rx='3'/><text x='50%' y='58%' font-size='11' text-anchor='middle' fill='white' font-family='Segoe UI'>Start</text></svg>" alt="">Start</div>
  <div class="task-middle" id="taskMiddle"></div>
  <div class="clock" id="clock"></div>
</div>

<!-- Start menu -->
<div class="start-menu" id="startMenu">
  <div class="start-row">
    <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='44' height='44'><rect width='44' height='44' rx='8' fill='%230166c8'/><text x='50%' y='60%' font-size='20' text-anchor='middle' fill='white' font-family='Segoe UI'>W</text></svg>">
    <div>
      <div style="font-weight:700;color:#00324d">WildPinkRice</div>
      <div style="color:#557b94;font-size:13px">Developer • experimental scripts</div>
    </div>
  </div>
  <div style="height:8px"></div>
  <div class="start-link" id="openCloner">Open ChatGPT Chat Cloner</div>
  <div class="start-link" id="openRepo">Open GitHub</div>
  <div class="start-link" id="openGreasy">Open GreasyFork</div>
  <div style="height:8px;border-top:1px solid #e6f6ff;margin-top:8px;padding-top:8px"></div>
  <div class="start-link" id="showAbout">About</div>
</div>

<!-- Context menu -->
<div class="context" id="contextMenu">
  <button id="ctx-new">New → Folder</button>
  <button id="ctx-refresh">Refresh</button>
  <button id="ctx-easter">Easter egg: Disco mode</button>
</div>

<!-- Modal -->
<div class="modal" id="modal">
  <div class="box" id="modalBox">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div style="font-weight:800;font-size:18px">Secret Mode</div>
      <button class="close" id="modalClose">OK</button>
    </div>
    <div style="margin-top:12px;color:#02324a" id="modalContent">You found an easter egg — welcome to Super XP Mode.</div>
  </div>
</div>

<!-- Placeholder windows -->
<div id="windowsLayer"></div>

<script>
  // Utility
  const $ = sel => document.querySelector(sel);
  const $$ = sel => Array.from(document.querySelectorAll(sel));

  // Clock
  function updateClock(){
    const d = new Date();
    const h = d.getHours().toString().padStart(2,'0');
    const m = d.getMinutes().toString().padStart(2,'0');
    $('#clock').textContent = `${h}:${m}`;
  }
  updateClock(); setInterval(updateClock,60000);

  // Start menu toggle
  const startBtn = $('#startBtn'), startMenu = $('#startMenu');
  startBtn.addEventListener('click', e => {
    startMenu.style.display = startMenu.style.display === 'flex' ? 'none' : 'flex';
  });

  // Desktop right-click context
  const desktop = $('#desktop'), ctx = $('#contextMenu');
  desktop.addEventListener('contextmenu', (e)=>{
    e.preventDefault();
    ctx.style.left = e.pageX + 'px';
    ctx.style.top = e.pageY + 'px';
    ctx.style.display = 'block';
  });
  document.addEventListener('click',(e)=>{ if(!ctx.contains(e.target)) ctx.style.display='none' });

  // Easter: Disco toggle
  let disco = false;
  $('#ctx-easter').addEventListener('click', ()=>{
    disco = !disco;
    if(disco) document.body.classList.add('disco'); else document.body.classList.remove('disco');
    ctx.style.display='none';
  });

  // Start menu actions
  $('#openCloner').addEventListener('click', ()=> openApp('cloner'));
  $('#openRepo').addEventListener('click', ()=> window.open('https://github.com/WildPinkRice','_blank'));
  $('#openGreasy').addEventListener('click', ()=> window.open('https://greasyfork.org/en/scripts/553238-chatgpt-chat-cloner','_blank'));
  $('#showAbout').addEventListener('click', ()=> showModal('About', 'This desktop is a retro-modern interactive mockup. Contact: wildpinkrice@gmail.com'));

  // Double-click icons to open windows
  let lastClick = 0;
  $$('#icons .icon').forEach(icon=>{
    icon.addEventListener('dblclick', ()=> openApp(icon.dataset.app));
  });

  // Windows management
  const windowsLayer = $('#windowsLayer');
  let zIndex = 100;

  function openApp(name){
    // avoid duplicate: bring to front if exists
    const existing = document.querySelector(`.window[data-app="${name}"]`);
    if(existing){ bringToFront(existing); return; }

    const win = document.createElement('div');
    win.className='window crt';
    win.dataset.app = name;
    win.style.left = 'calc(50% - 260px)';
    win.style.top = '80px';
    win.style.zIndex = ++zIndex;
    win.innerHTML = `
      <div class="titlebar"><div>${titleFor(name)}</div>
        <div class="title-actions">
          <button class="min">_</button>
          <button class="max">☐</button>
          <button class="cls">×</button>
        </div>
      </div>
      <div class="content">${contentFor(name)}</div>
    `;
    windowsLayer.appendChild(win);
    makeDraggable(win);
    attachWindowActions(win);
    addTaskItem(win, name);
  }

  function titleFor(name){
    if(name==='cloner') return 'ChatGPT Chat Cloner';
    if(name==='readme') return 'Readme';
    return 'App';
  }

  function contentFor(name){
    if(name==='cloner') return `<div>
      <p style="font-weight:700;color:#00324d">ChatGPT Chat Cloner</p>
      <p style="color:#015982">Open the GreasyFork page or install the Tampermonkey script to use. Quick actions:</p>
      <ul>
        <li>View on GreasyFork: <a href="https://greasyfork.org/en/scripts/553238-chatgpt-chat-cloner" target="_blank">link</a></li>
        <li>Author: wildpinkrice@gmail.com</li>
      </ul>
      <pre>/* Example output preview */\nUser: Hello\nAssistant: Hi — this is a preview of the cloned chat.</pre>
      <a class="button" href="https://greasyfork.org/en/scripts/553238-chatgpt-chat-cloner" target="_blank">Open GreasyFork</a>
    </div>`;
    if(name==='readme') return `<div><h3>Readme</h3>
      <p style="color:#015982">This is the demo desktop for the ChatGPT Chat Cloner project. Double-click icons, open start menu, and discover easter eggs.</p>
    </div>`;
    return `<div>App content</div>`;
  }

  function makeDraggable(el){
    const title = el.querySelector('.titlebar');
    title.style.cursor='grab';
    let offsetX=0, offsetY=0, isDown=false;
    title.addEventListener('mousedown',(e)=>{
      isDown=true; el.style.zIndex = ++zIndex;
      offsetX = e.clientX - el.offsetLeft; offsetY = e.clientY - el.offsetTop;
      title.style.cursor='grabbing';
    });
    document.addEventListener('mousemove',(e)=>{
      if(!isDown) return;
      el.style.left = (e.clientX - offsetX) + 'px';
      el.style.top = (e.clientY - offsetY) + 'px';
    });
    document.addEventListener('mouseup',()=>{ isDown=false; title.style.cursor='grab'; });
    // focus on click
    el.addEventListener('mousedown', ()=> bringToFront(el));
  }

  function attachWindowActions(win){
    win.querySelector('.cls').addEventListener('click', ()=> {
      removeTaskItem(win.dataset.app);
      win.remove();
    });
    win.querySelector('.min').addEventListener('click', ()=> {
      win.style.display='none';
      const item = document.querySelector(`.task-item[data-app="${win.dataset.app}"]`);
      if(item) item.classList.add('minimized');
    });
    win.querySelector('.max').addEventListener('click', ()=> {
      if(win.classList.contains('maxed')){
        win.style.width='520px'; win.style.height='360px'; win.style.left='calc(50% - 260px)'; win.style.top='80px';
        win.classList.remove('maxed');
      } else {
        win.style.left='8px'; win.style.top='8px'; win.style.width = `calc(100% - 16px)`; win.style.height = `calc(100% - 120px)`;
        win.classList.add('maxed');
      }
    });
  }

  function bringToFront(win){
    win.style.zIndex = ++zIndex;
  }

  // Taskbar items
  function addTaskItem(win, name){
    const item = document.createElement('div');
    item.className='task-item';
    item.dataset.app = name;
    item.textContent = titleFor(name);
    item.addEventListener('click', ()=>{
      const w = document.querySelector(`.window[data-app="${name}"]`);
      if(!w){ openApp(name); return; }
      if(w.style.display === 'none') { w.style.display='block'; item.classList.remove('minimized'); bringToFront(w); }
      else { w.style.display='none'; item.classList.add('minimized'); }
    });
    $('#taskMiddle').appendChild(item);
  }
  function removeTaskItem(name){
    const it = document.querySelector(`.task-item[data-app="${name}"]`);
    if(it) it.remove();
  }

  // Modal
  function showModal(title, content){
    const modal = $('#modal'); $('#modalContent').textContent = content; modal.style.display='flex';
  }
  $('#modalClose').addEventListener('click', ()=> $('#modal').style.display='none');

  // Konami code easter egg (↑↑↓↓←→←→BA)
  const konami = [38,38,40,40,37,39,37,39,66,65];
  let kpos=0;
  document.addEventListener('keydown',(e)=>{
    if(e.keyCode === konami[kpos]){ kpos++; if(kpos === konami.length){ triggerKonami(); kpos=0; } }
    else kpos = (e.keyCode === konami[0]) ? 1 : 0;
  });
  function triggerKonami(){
    // Super XP mode: show modal + enable CRT effect + disco for a moment
    showModal('SUPER XP MODE', 'You unlocked Super XP Mode — enjoy extra retro effects!');
    document.body.classList.add('disco');
    setTimeout(()=> document.body.classList.remove('disco'), 6000);
  }

  // Small keyboard shortcuts
  document.addEventListener('keydown',(e)=>{
    if(e.key === 'F1'){ e.preventDefault(); showModal('Help', 'Double-click icons to open apps. Press Konami for a surprise. Right-click desktop for menu.'); }
  });

  // minimize from task item double click to restore
  // ensure desktop is focusable to close start menu on blur
  desktop.addEventListener('click', ()=> startMenu.style.display='none');

  // small UX: double-click detection fallback (some browsers)
  // (we used dblclick on icons already)
</script>
</body>
</html>
